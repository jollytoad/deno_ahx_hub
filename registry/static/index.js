(()=>{var ze=Object.defineProperty;var Ye=(e,t)=>{for(var o in t)ze(e,o,{get:t[o],enumerable:!0})};var ue=!1;document.addEventListener("DOMContentLoaded",function(){ue=!0},{once:!0,passive:!0});function me(e){ue?e(document):document.addEventListener("DOMContentLoaded",()=>e(document),{once:!0,passive:!0})}var x=new Map,U=new Set,W=new WeakMap;function E(e,t,o){if(x.has(t)||x.set(t,new WeakMap),x.get(t).set(e,o),!W.has(e)){let r=new WeakRef(e);U.add(r),W.set(e,r)}}function S(e,t,o){return o&&!v(e,t)&&E(e,t,o()),x.get(t)?.get(e)}function v(e,t){return!!x.get(t)?.has(e)}function de(e,t){if(t)x.get(t)?.delete(e);else{for(let r of x.values())r.delete(e);let o=W.get(e);o&&(U.delete(o),W.delete(e))}}function Se(e,t){for(let[o,r]of x.entries())if(o.startsWith("triggered:")){let n=r.get(e);n!==void 0&&E(t,o,n)}}function*w(e){let t=x.get(e);if(t)for(let o of U){let r=o.deref();r&&t.has(r)&&(yield[r,t.get(r)])}}function*C(){for(let e of U){let t=e.deref();if(t)for(let[o,r]of x.entries())r.has(t)&&(yield[t,o,r.get(t)])}}var f={prefix:"ahx",httpMethods:["get","post","put","patch","delete"],ahxAttrs:["trigger","target","slot-name"],maxLoopCount:10,defaultDelay:20,defaultSettleDelay:20,defaultSwapDelay:0,enableDebugEvent:!1,pseudoChildTags:{article:"div",aside:"div",audio:"track",body:"div",canvas:null,colgroup:"col",datalist:"option",div:"div",dl:"dt",footer:"div",form:"fieldset",head:null,header:"div",hgroup:"div",html:null,iframe:null,main:"div",map:"area",menu:"li",noscript:null,object:null,ol:"li",optgroup:"option",p:"span",picture:"source",portal:null,pre:null,script:null,section:"div",select:"option",span:"span",style:null,table:"tbody",tbody:"tr",template:null,textarea:null,tfoot:"tr",thead:"tr",tr:"td",ul:"li",video:"track",area:null,base:null,br:null,col:null,embed:null,hr:null,img:null,input:null,link:null,meta:null,param:null,source:null,track:null,wbr:null,"*":"slot"}};function q(e,t,o,r=!0){if(e!==null){let n=new CustomEvent(t,{bubbles:!!e,cancelable:r,detail:o});return f.enableDebugEvent&&dispatchEvent(new CustomEvent(f.prefix,{bubbles:!1,cancelable:!1,detail:{type:n.type,target:e,bubbles:n.bubbles,cancelable:n.cancelable,detail:n.detail}})),e&&"dispatchEvent"in e?e.dispatchEvent(n):dispatchEvent(n)}return!1}function _(e,t,o){q(e,`${f.prefix}:${t}`,o,!1)}function p(e,t,o){o._before=!0;let r=q(e,`${f.prefix}:${t}`,o);return delete o._before,r||q(e,`${f.prefix}:${t}:veto`,o,!1),r}function u(e,t,o){o._after=!0,q(e,`${f.prefix}:${t}:done`,o,!1),delete o._after}function N(e,t,o){q(e,`${f.prefix}:${t}:error`,{error:t,...o},!1)}function D(e){let t=new Set;for(let o of e.style)te(o)&&t.add(o);return t}function ge(e){for(let t of e.attributes)if(oe(t.name))return!0;return!1}function te(e){return e.startsWith(`--${f.prefix}-`)}function oe(e){return e.startsWith(`${f.prefix}-`)}function Xe(e){return e.startsWith(`${f.prefix}-`)}function A(e){return te(e)?e:oe(e)?`--${e}`:`--${f.prefix}-${e}`}function B(e){return oe(e)?e:te(e)?e.substring(2):`${f.prefix}-${e}`}function F(e){return Xe(e)?e:`${f.prefix}-${e}`}function g(e){if(v(e,"owner"))return S(e,"owner");if(e instanceof StyleSheet)return S(e,"owner")??e.href??void 0;if(e instanceof CSSRule&&e.parentStyleSheet)return g(e.parentStyleSheet);if(e instanceof Element&&e.parentElement)return g(e.parentElement)}function R(e,t){t!==g(e)&&E(e,"owner",t)}function b(e,t,o,r="tokens"){e=A(e);let n=t.style.getPropertyValue(e)?.trim();if(n){let i=/^attr\(([^\)\s,]+)(?:\s+([^\)\s,]+))?\)$/.exec(n);if(i)return o?(n=o.getAttribute(i[1])??void 0,n&&i[2]==="url"&&(n=s(n,o.baseURI)),n?[n]:[]):[n];{let c=/^--prop\(([^\)\s,]+)(?:\s+([^\)\s,]+))?\)$/.exec(n);if(c){if(!o)return[n];n=void 0;let a=o[c[1]];return c[2]==="url"&&typeof a=="string"?n=s(a,o.baseURI):(typeof a=="string"||typeof a=="number"||typeof a=="boolean")&&(n=String(a)),n?[n]:[]}}let l=/^url\(([^\)]*)\)(?:\s+url\(([^\)]*)\))*$/.exec(n);if(l){let[,...c]=l,a=t.parentStyleSheet?.href??t.style.parentRule?.parentStyleSheet?.href??o?.baseURI;return c.flatMap(m=>{let d=m?s(re(m),a):void 0;return d?[d]:[]})}n=re(n)}return n?r==="tokens"?n.split(/\s+/).map(re):[n]:[];function s(i,l){try{return new URL(i,l).href}catch(c){console.error(c,i,l)}}}function re(e){let t=/^\"([^\"]*)\"$/.exec(e)??/^\'([^\']*)\'$/.exec(e);return t?t[1]:e}function V(e,t,o="tokens"){e=B(e);let r=t.getAttribute(e)??void 0;return r?o==="tokens"?r.split(/\s+/):[r]:[]}function h(e,t,o="tokens"){return t instanceof Element?V(e,t,o):b(e,t,void 0,o)}function he(e){let[t]=h("trigger",e,"whole"),o=[];if(t){let r=t.split(/\s*,\s*/);for(let n of r){let[s,...i]=n.split(/\s+/);if(s){let l={eventType:s};for(let c of i)switch(c){case"once":l[c]=!0;break}o.push(l)}}}return o}function ye(e){let t=[];for(let o of f.httpMethods){let[r]=h(o,e);r&&t.push({type:"request",method:o,url:Je(r,e)})}return e instanceof CSSStyleRule&&D(e).has(A("harvest"))&&t.push({type:"harvest"}),t}function Je(e,t){let o=t instanceof Element?t.baseURI:void 0;try{return new URL(e,o)}catch{return}}function xe(e){if(e!=null)return e.slice(-2)=="ms"?parseFloat(e.slice(0,-2))||void 0:e.slice(-1)=="s"?parseFloat(e.slice(0,-1))*1e3||void 0:e.slice(-1)=="m"?parseFloat(e.slice(0,-1))*1e3*60||void 0:parseFloat(e)||void 0}function Ee(e){let t=h("swap",e,"tokens"),o={};if(t?.length){o.swapStyle=t.shift()?.toLowerCase(),(o.swapStyle==="attr"||o.swapStyle==="input")&&(o.itemName=t.shift());for(let r of t){let[n,s]=r.split(":");switch(n){case"swap":case"delay":o.delay=xe(s);break;case"join":o.merge="join";break;case"append":o.merge="append";break}}}return o}function j(e,t){return Ze(e,t,!1)}function Ze(e,t,o){if(!t)return s();let[r,n]=et(t);switch(r){case"this":return s(e);case"closest":return s(e.closest(n));case"find":return o?e.querySelectorAll(n):e.querySelector(n)??void 0;case"next":return s(tt(e,n));case"previous":return s(ot(e,n));case"body":return s(e.ownerDocument.body);case"document":case"window":return s();default:return o?e.ownerDocument.querySelectorAll(t):e.ownerDocument.querySelector(t)??void 0}function s(i){return o?i?[i]:[]:i??void 0}}function et(e){let t=e.indexOf(" ");return t===-1?[e,""]:[e.substring(0,t),e.substring(t+1)]}function tt(e,t){for(let o of e.ownerDocument.querySelectorAll(t))if(o.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_PRECEDING)return o}function ot(e,t){let o=e.ownerDocument.querySelectorAll(t);for(let r=o.length-1;r>=0;r--){let n=o[r];if(n.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_FOLLOWING)return n}}async function*rt(){let e=this.getReader();try{let t,o;do({done:t,value:o}=await e.read()),o!==void 0&&(yield o);while(!t)}finally{e.releaseLock()}}ReadableStream.prototype[Symbol.asyncIterator]??=rt;var G=class extends TransformStream{constructor(t,o){let r,n;super({start(){r=t.implementation.createHTMLDocument()},transform(s,i){if(r.write(s),!n&&r.body?.childElementCount>0){let l=r.body.children[0];o&&l instanceof HTMLTemplateElement?n=l.content:n=r.body}for(;n?.childElementCount>1;){let l=n.children[0];t.adoptNode(l),i.enqueue(l)}},flush(s){for(let i of[...n?.children??[]])t.adoptNode(i),s.enqueue(i);r.close(),r=void 0,n=void 0}})}};function we(e,t){let[o,r]=nt(e),n=[];for(let[s,i]of w("slotName"))i.has(o)&&(s instanceof Element?n.push(s):s instanceof CSSStyleRule&&n.push(...t.querySelectorAll(s.selectorText)));return r&&(n=n.filter(s=>s.matches(r))),n}function nt(e){let t=e.indexOf(" ");return t===-1?[e,""]:[e.substring(0,t),e.substring(t+1)]}async function Ce(e){let{response:t,target:o}=e,r=o.ownerDocument;if(t?.ok&&t.headers.get("Content-Type")?.startsWith("text/html")&&t.body){let n=0,s,i=!1,l=t.body.pipeThrough(new TextDecoderStream).pipeThrough(new G(r,!0));for await(let c of l){switch(c.localName){case`${f.prefix}-replace-previous`:i=!0;continue;case`${f.prefix}-flush`:continue}let a=e.swapStyle??"none",m=[o],[d]=V("slot",c,"whole");if(d){let P=we(d,r);P.length?(m=P,a="inner"):a="none"}let K=m.length?c:void 0;for(let P of m){K&&(c=K.cloneNode(!0));let $={...e,swapStyle:a,target:P,element:c,previous:s,index:n,slot:d};if(p(P,"swap",$)){let{target:ce,element:M,controlOwner:fe,swapStyle:Qe,slot:pe}=$;fe&&R(M,fe),pe||!s?st[Qe]?.(ce,M):s&&i?s.replaceWith(M):s.after(M),pe||(s=M),u(ce,"swap",$)}}n++}}}var Q=e=>(t,o)=>{t.insertAdjacentElement(e,o)},st={none(){},inner(e,t){e.replaceChildren(t)},outer(e,t){let o=`${f.prefix}-pseudo`;for(let r of e.classList)r.startsWith(o)&&t.classList.add(r);Se(e,t),e.replaceWith(t)},beforebegin:Q("beforebegin"),afterbegin:Q("afterbegin"),beforeend:Q("beforeend"),afterend:Q("afterend")};function Ae(e){let{target:t,itemName:o,merge:r}=e,n={...e};if(n.oldValue=t.getAttribute(o)??void 0,r==="join"&&n.oldValue&&n.value&&(n.value=it(n.oldValue,n.value)),p(t,"swap",n)){let{target:s,itemName:i,value:l}=n;i&&l!==void 0&&s.setAttribute(i,l),u(s,"swap",n)}}function it(e,t){let o=" ",r=new Set(`${e}${o}${t}`.split(o));return r.delete(""),[...r].join(o)}function Te(e){let{target:t,itemName:o,merge:r,value:n}=e;if(!o||n===void 0)return;let s={...e};if(t instanceof HTMLFormElement)switch(s.input=t.elements.namedItem(o)??void 0,r){case"append":s.input=be(o,t.ownerDocument);break;default:s.input?"value"in s.input&&(s.oldValue=s.input.value):s.input=be(o,t.ownerDocument);break}else{s.formData=S(t,"formData",()=>new FormData);let i=s.formData.get(o);typeof i=="string"&&(s.oldValue=i)}if(r==="join"&&(s.value=lt(s.oldValue,s.value)),p(t,"swap",s)){let{target:i,input:l,itemName:c,merge:a,formData:m,value:d}=s;c&&d!==void 0&&(l&&"value"in l?(l.value=d,l instanceof Element&&!l.parentElement&&i.insertAdjacentElement("beforeend",l)):m&&(a==="append"?m.append(c,d):m.set(c,d))),u(i,"swap",s)}}function be(e,t){let o=t.createElement("input");return o.type="hidden",o.name=e,o}function lt(e="",t=""){let o=" ",r=new Set(`${e}${o}${t}`.split(o));return r.delete(""),[...r].join(o)}function ve(e){let{swapStyle:t}=e;switch(t){case"input":return Te(e);case"attr":return Ae(e)}}async function z(e){let{swapStyle:t,response:o,itemName:r}=e,{value:n}=e;switch(t){case"input":case"attr":return r?(n===void 0&&o&&(n=await o.text()),ve({...e,swapStyle:t,itemName:r,value:n})):void 0;default:if(at(o))return Ce({...e,swapStyle:t??"none",response:o})}}function at(e){return!!e?.headers.get("Content-Type")?.startsWith("text/html")&&!!e.body}async function Re(e){let{source:t,action:o,target:r,swap:n,controlOwner:s,targetOwner:i}=e;if(o.type!=="request")return;let l=ct({...e,action:o});if(!l)return;let c={request:l};if(p(t,"request",c)){let{request:a}=c;try{let m=await fetch(a);if(u(t,"request",{request:a,response:m}),m.headers.has(F("refresh"))){let d={...e,request:a,response:m,refresh:!0,url:new URL(location.href)};if(p(t,"navigate",d)){location.reload();return}}await z({...n,target:r,response:m,controlOwner:s,targetOwner:i})}catch(m){u(t,"request",{request:a,error:m})}}}function ct(e){let{action:t,formData:o,source:r}=e;if(!t.url){N(r,"invalidRequest",{action:t,reason:"Missing URL"});return}let n=new URL(t.url),s=new Headers,i={method:t.method.toUpperCase(),headers:s};if(s.set("Accept","text/html,application/xhtml+xml,text/plain;q=0.9"),s.set(F("request"),"true"),s.set(F("current-url"),r.ownerDocument.location.href),o)switch(i.method){case"GET":case"HEAD":case"DELETE":for(let[l,c]of o)typeof c=="string"&&n.searchParams.append(l,c);break;case"PUT":case"POST":case"PATCH":ft(o)?(i.body=o,s.set("Content-Type","multipart/form-data")):(i.body=new URLSearchParams(o),s.set("Content-Type","application/x-www-form-urlencoded"))}return new Request(n,i)}function ft(e){for(let t of e.values())if(t instanceof File)return!0;return!1}async function Ne(e){let{event:t,source:o,action:r,target:n,swap:s,control:i,controlOwner:l,targetOwner:c}=e;if(!(i instanceof CSSStyleRule)||r.type!=="harvest")return;let[a]=b("harvest",i,o);if(a===void 0)return;let m=pt(t),d={source:o,oldValue:m,newValue:a,control:i,targetOwner:c,controlOwner:l};p(o,"harvest",d)&&(await z({...s,target:n,value:d.newValue}),u(o,"harvest",d))}function pt(e){if(e instanceof CustomEvent&&"oldValue"in e.detail)return e.detail.oldValue}async function Y(e){let{source:t,control:o,action:r}=e,[n]=h("include",o,"whole"),s=j(t,n);if(e.formData=s?ut(s):void 0,r.type==="request"&&o instanceof CSSStyleRule&&r.url===void 0){let[i]=b(r.method,o,t);i&&(e.action={...r,url:new URL(i,t.baseURI)})}if(p(t,"action",e)){switch(e.action.type){case"request":await Re(e);break;case"harvest":await Ne(e);break}u(t,"action",e)}}function ut(e){if(v(e,"formData"))return S(e,"formData");if(e instanceof HTMLFormElement)return new FormData(e)}var ne=new Set;function Pe(e){p(e.source,"queue",e)&&ne.add(e)}function De(e){ne.delete(e),u(e.source,"queue",e)}function Ie(){return ne.values()}function Oe(e){let{control:t,trigger:o,source:r}=e;if(se(r)){N(r,"triggerDenied",e);return}if(o?.once&&S(r,`triggered:${o.eventType}`)?.has(t))return;o?.changed,p(r,"trigger",e)&&(o?.once&&S(r,`triggered:${o.eventType}`,()=>new WeakSet).add(t),o?.throttle||(o?.delay?setTimeout(n,o.delay):setTimeout(n,0)),u(r,"trigger",e));function n(){mt(e)?Y(e):Pe(e)}}function se(e){let[t]=h("deny-trigger",e);return t==="true"}function mt(e){return e.target instanceof Element}var dt=new Set(["load","watch"]);function ke(e){return dt.has(e)?`${f.prefix}:${e}`:e}function Le(e){let t=`${f.prefix}:`;return e.startsWith(t)?e.substring(t.length):e}function X(e){return!!e.parentStyleSheet&&!e.parentStyleSheet.disabled}var St=0;function $e(e){return S(e,"ruleId",()=>`${++St}`)}function*gt(e,t,o){let r=S(t,`control:${e}`);if(r&&(yield[t,t,r]),o)for(let[n,s]of w(`control:${e}`))n instanceof Element&&t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY&&(yield[n,n,s])}function*ht(e,t,o){for(let[r,n]of w(`control:${e}`))if(n&&r instanceof CSSStyleRule&&X(r)&&(t.matches(r.selectorText)&&(yield[t,r,n]),o))for(let s of t.querySelectorAll(r.selectorText))yield[s,r,n]}function*Me(e,t,o){yield*gt(e,t,o),yield*ht(e,t,o)}function I(e,t){let[o]=h("target",t,"whole"),r=/^await\s+/.test(o);r&&(o=o.substring(5).trimStart());let n=j(e,o);return r?n??"await":n??e}var qe=new Set;function Ve(e){if(!qe.has(e)){let t={eventType:e};p(void 0,"addEventType",t)&&(qe.add(e),addEventListener(ke(e),yt),u(void 0,"addEventType",t))}}function yt(e){for(let t of xt(e))Oe(t)}function*xt(e){if(e.target instanceof Element){let t=Me(Le(e.type),e.target,Et(e));for(let[o,r,n]of t){let s=I(o,r);yield{...n,event:e,source:o,sourceOwner:g(o),target:s,targetOwner:s!=="await"?g(s):void 0,control:r,controlOwner:g(r)}}}}function Et(e){return e instanceof CustomEvent&&!!e.detail?.recursive}function y(e){if(e instanceof Element)return e;if(e&&"ownerNode"in e&&e.ownerNode&&e.ownerNode instanceof Element)return e.ownerNode;if(e?.parentStyleSheet)return y(e.parentStyleSheet);if(e&&"ownerRule"in e)return y(e.ownerRule)}function He(e){let t=y(e.control);if(p(t,"processControl",e)){let{control:o,trigger:r,action:n,swap:s}=e,{eventType:i}=r;E(o,`control:${i}`,{trigger:r,action:n,swap:s}),Ve(i),u(t,"processControl",e)}}function J(e){let t=he(e),o=ye(e),r=Ee(e);for(let n of t)for(let s of o)He({control:e,trigger:n,action:s,swap:r})}function Z(e){let t=h("slot-name",e,"tokens");if(t.length){let o=S(e,"slotName",()=>new Set);t.forEach(r=>o.add(r))}}function H(e){if(ge(e)){let t={owner:g(e)};p(e,"processElement",t)&&(t.owner&&R(e,t.owner),J(e),Z(e),u(e,"processElement",t))}}function ee(e){let t=new Set;[...f.ahxAttrs,...f.httpMethods].forEach(r=>{t.add(`[${B(r)}]`)});let o={selectors:t};if(p(e,"processElements",o)){let r=new Set;for(let n of o.selectors){!r.has(e)&&e instanceof Element&&e.matches(n)&&(r.add(e),H(e));for(let s of e.querySelectorAll(n))r.has(s)||(r.add(s),H(s))}u(e,"processElements",o)}}function Ke(e){_(e,"mutate",{})}function O(e){_(e,"load",{recursive:!0})}function We(e,t){let o=A("deny-trigger");if(t.has(o)){let[r]=b(o,e);r==="true"?E(e,"denyTrigger",!0):(e.style.removeProperty(o),N(e.parentStyleSheet?.ownerNode??document,"invalidCssValue",{prop:o,value:r,rule:e}))}return[]}var wt=1;function Ue(e){let t=e.selectorText.includes("::before"),o=t?!1:e.selectorText.includes("::after");if(t||o){let r=S(e,"pseudoId")||wt++,n=t?"before":"after",s=e.selectorText.replace(`::${n}`,"");for(let i of document.querySelectorAll(s))Ct(i,r,n);return At(e,r,n)}}function Ct(e,t,o){let r=`${f.prefix}-pseudo-${t}`;if(!e.querySelector(`:scope > .${r}`)){let n=e.localName,s=f.pseudoChildTags[n];if(s===null){N(e,"pseudoElementNotPermitted",{parentTag:n});return}s===void 0&&(s=f.pseudoChildTags["*"]??"span");let i=`${f.prefix}-pseudo-${o}`,l=document.createElement(s);l.setAttribute("class",`${f.prefix}-pseudo ${i} ${r}`);let c={pseudoElt:l,pseudoId:t,place:o};if(p(e,"pseudoElement",c)){let a=c.place==="before"?"afterbegin":"beforeend";e.insertAdjacentElement(a,c.pseudoElt),u(e,"pseudoElement",c)}}}function At(e,t,o){if(!v(e,"pseudoId")){E(e,"pseudoId",t);let r=`${f.prefix}-pseudo-${t}`,n=e.selectorText.replace(`::${o}`,` > .${r}`),s=e.cssText.replace(e.selectorText,n),i={selectorText:n,cssText:s,parentStyleSheet:e.parentStyleSheet},l={pseudoId:t,pseudoRule:i,rule:e,place:o,owner:g(e)},c=y(e)??document;if(p(c,"pseudoRule",l)){let a=l.pseudoRule.parentStyleSheet;if(a){let m=a.cssRules,d=m[a.insertRule(l.pseudoRule.cssText,m.length)];return!l.owner&&a.href&&(l.owner=a.href),l.owner&&R(d,l.owner),u(c,"pseudoRule",{...l,pseudoRule:d}),d}}}}function _e(e,t){let o=!!y(e)?.ownerDocument?.querySelector(e.selectorText),r=b("import",e);for(let n of r){let s=S(e,"importLinks")?.get(n)?.deref();s?o&&s.sheet?.disabled?(s.sheet.disabled=!1,setTimeout(()=>{t?.(s)},0)):!o&&s.sheet&&(s.sheet.disabled=!0):o&&(s=bt(n,y(e)?.crossOrigin??void 0,t),s&&S(e,"importLinks",()=>new Map).set(n,new WeakRef(s)))}}function bt(e,t,o){let r={url:e,crossOrigin:t,disabled:!1};if(p(document,"cssImport",r)&&!document.querySelector(`link[rel="stylesheet"][href="${r.url}"]`)){let n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",r.url),typeof r.crossOrigin=="string"&&n.setAttribute("crossorigin",r.crossOrigin),n.addEventListener("load",s=>{function i(l=1){setTimeout(()=>{n.sheet?(u(s.target??document,"cssImport",r),o?.(n)):l<1e3?i(l*2):console.error("ahx timeout loading stylesheet:",r.url,n.sheet)},l)}i()},{once:!0,passive:!0}),document.head.appendChild(n),n}}function ie(e,t){let o=$e(e);if(e.parentStyleSheet&&Tt(e.parentStyleSheet),t.size){let r=g(e),n={rule:e,props:t,owner:r},s=y(e)??document;if(p(s,"processRule",n)){n.owner&&R(e,n.owner),Rt(e,o,t),_e(e,vt),We(e,t);let i=Ue(e);i&&ie(i,D(i)),J(e),Z(e),u(s,"processRule",n)}}}function Tt(e){v(e,"owner")||R(e,e.href??"unknown")}function vt(e){k(e),O(e.ownerDocument.documentElement)}function Rt(e,t,o){let r=A("rule");o.has(r)||e.style.setProperty(r,t);let n=A(`rule-${t}`);o.has(n)||e.style.setProperty(n,t)}function k(e){let t={rules:Nt(e)};if(p(e,"processRules",t)){for(let[o,r]of t.rules)ie(o,r);u(e,"processRules",t)}}function Nt(e){let t=new Map;function o(s){if(!s.disabled)try{r(s.cssRules)}catch{}}function r(s){for(let i of s)i instanceof CSSImportRule&&i.styleSheet?o(i.styleSheet):i instanceof CSSGroupingRule?r(i.cssRules):i instanceof CSSStyleRule&&n(i)}function n(s){let i=D(s);i.size>0&&t.set(s,i)}if("sheet"in e&&e.sheet)o(e.sheet);else if("styleSheets"in e)for(let s of e.styleSheets)o(s);return t}function Be(){for(let e of Ie()){let t=I(e.source,e.control);t instanceof Element&&(De(e),Y({...e,target:t,targetOwner:g(t)}))}}function Fe(e){let t=new MutationObserver(r=>{let n={mutations:r};if(p(e,"mutations",n)){let s=new Set,i=new Set,l=new Set,c=new Set;for(let a of n.mutations){for(let m of a.removedNodes)s.add(m),m instanceof Element&&i.add(m);for(let m of a.addedNodes)s.delete(m),m instanceof Element&&(ee(m),l.add(m));a.type==="attributes"&&a.target instanceof Element&&H(a.target),a.target instanceof Element&&c.add(a.target)}setTimeout(()=>{for(let a of c)Ke(a)},0),setTimeout(()=>{for(let a of l)O(a)}),k(e),Be(),u(e,"mutations",{...n,removedElements:i,addedElements:l,mutatedElements:c});for(let a of s)je(a)}}),o={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0};p(e,"startObserver",o)&&(t.observe(e,o),u(e,"startObserver",o))}function je(e){de(e);for(let t of e.childNodes)je(t)}var ae={};Ye(ae,{controls:()=>Lt,elements:()=>kt,eventsAll:()=>Dt,eventsNone:()=>It,forms:()=>Mt,internals:()=>Pt,logger:()=>le,loggerConfig:()=>L,owners:()=>$t,slots:()=>Vt});function Pt(){console.group("ahx internal properties...");let e;for(let[t,o,r]of C()){if(t!==e){e&&console.groupEnd();let n=t instanceof CSSRule?t.cssText:t;if(console.groupCollapsed(n),console.dir(t),t instanceof CSSStyleRule)for(let s of document.querySelectorAll(t.selectorText))console.log(s);e=t}if(r instanceof Map){console.group("%s:",o);for(let n of r)console.log("%c%s:","font-weight: bold",...n);console.groupEnd()}else console.log("%c%s:","font-weight: bold",o,r)}console.groupEnd()}var L={group:!1,include:[]};function Dt(){f.enableDebugEvent=!0,addEventListener(f.prefix,le)}function It(){f.enableDebugEvent=!1,removeEventListener(f.prefix,le)}function le({detail:e}){let{type:t,target:o,detail:r}=e;if(Ot(t))if(r?._after&&L.group&&console.groupEnd(),r?._before){let n=L.group?L.group===!0?"group":"groupCollapsed":"debug";console[n]("%s -> %o %o",t,o,r)}else console.debug("%s -> %o %o",t,o,r)}function Ot(e){return L.include?.length?!!L.include.some(t=>e.includes(`:${t}`)):!0}function T(e,t){if(e===t)return 0;let o=e.compareDocumentPosition(t);return o&Node.DOCUMENT_POSITION_FOLLOWING||o&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:o&Node.DOCUMENT_POSITION_PRECEDING||o&Node.DOCUMENT_POSITION_CONTAINS?1:0}function kt(e){console.group("ahx elements...");let t=new Set,o=new Set;for(let[r]of C())r instanceof Element?t.add(r):r instanceof CSSStyleRule&&o.add(r);for(let r of o)for(let n of document.querySelectorAll(r.selectorText))n instanceof Element&&t.add(n);for(let r of[...t].sort(T))if(e){let n=V(e,r);n.length&&console.log(r,...n)}else console.log(r);console.groupEnd()}function Lt(e=!1){console.group("ahx controls...");let t=new Map;function o(n,s,i){t.has(n)||t.set(n,new Map),t.get(n).set(i,s)}for(let[n,s,i]of C())if(s.startsWith("control:")){if(n instanceof Element)o(n,n,i);else if(n instanceof CSSStyleRule)for(let l of document.querySelectorAll(n.selectorText))l instanceof Element&&o(l,n,i)}let r=[...t.keys()].sort(T);for(let n of r){let s=t.get(n)??[],i=new Set,l=se(n);for(let[{trigger:c}]of s)i.add(c.eventType);console.groupCollapsed("%o : %c%s",n,l?"text-decoration: line-through; color: grey":"color: red",[...i].join(", "));for(let[{trigger:c,action:a,swap:m},d]of s)if(e)console.log("trigger:",c,"action:",a,"swap:",m,"control:",d);else{let K=d instanceof Element?"element":d.cssText,P="method"in a?`${a.method.toUpperCase()} ${a.url}`:a.type,$=(m.swapStyle??"default")+(m.itemName?` ${m.itemName}`:"");console.log("%c%s%c -> %c%s%c -> %c%s%c from: %c%s%c","color: red; font-weight: bold",c.eventType,"color: inherit; font-weight: normal","color: green",P,"color: inherit","color: darkorange",$,"color: inherit","color: hotpink",K,"color: inherit")}console.groupEnd()}console.groupEnd()}function $t(){console.group("ahx ownership...");let e=new Set;for(let[t,o,r]of C())t instanceof Element?e.add(t):o==="owner"&&(t instanceof CSSRule?console.log("%o -> %s",t.cssText,r):console.log("%o -> %s",t,r));for(let t of[...e].sort(T)){let o=S(t,"owner");console.log("%o -> %s",t,o??"none")}console.groupEnd()}function Mt(){console.group("ahx form...");let e=new Set;for(let[t]of w("formData"))t instanceof Element&&e.add(t);for(let[t]of qt("harvest"))for(let o of document.querySelectorAll(t.selectorText)){let r=I(o,t);r instanceof Element&&e.add(r)}for(let t of[...e].sort(T)){let o=t instanceof HTMLFormElement?new FormData(t):S(t,"formData");if(o){console.group(t);for(let[r,n]of o??[])console.log("%s: %c%s",r,"font-weight: bold",n);console.groupEnd()}}console.groupEnd()}function*qt(e){for(let[t,o,r]of C())o.startsWith("control:")&&t instanceof CSSStyleRule&&typeof r=="object"&&"action"in r&&r.action.type===e&&X(t)&&(yield[t,r])}function Vt(){console.group("ahx slots...");let e=new Map;function t(o,r){let n=e.get(o)??e.set(o,new Set).get(o);r.forEach(s=>n.add(s))}for(let[o,r]of w("slotName"))if(o instanceof Element)t(o,r);else if(o instanceof CSSStyleRule){let n=document.querySelectorAll(o.selectorText);for(let s of n)t(s,r)}for(let o of[...e.keys()].sort(T))console.log(o,...e.get(o));console.groupEnd()}function Ht(e,t){e&&e.getAttribute(`${f.prefix}-url-href`)!==t.href&&(o("href",t.href),o("host",t.host),o("path",t.pathname),o("search",t.search),o("hash",t.hash));function o(r,n){let s=`${f.prefix}-url-${r}`;n?e.setAttribute(s,n):e.removeAttribute(s)}}function Ge(e){function t(){Ht(e.documentElement,e.location)}["DOMContentLoaded","load","hashchange","popstate"].forEach(o=>{addEventListener(o,t)}),t()}me(e=>{Ge(e),Fe(e),k(e),ee(e),O(e.documentElement)});window.ahx=ae;})();
//# sourceMappingURL=index.js.map
